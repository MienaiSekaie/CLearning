Linux 内核编码风格

9.1 缩进和空白

1、关键字if、while、for与其后的控制表达式的(括号之间插入一个空格分隔，但括号内的表达式应紧贴括号
2、双目运算符的两侧各插入一个空格分隔，单目运算符和操作数之间不加空格
3、后缀运算符和操作数之间也不佳空格  如s.a  foo(arg1)   a[i]
4、,号和;号之后要加空格，这是英文书写习惯
5、有时为了突出优先级可以写得紧凑一些，但不能产生误导
6、接近或大于80个字符的较长语句或声明要折行写，折行后用空格和上面的表达式或参数对齐
7、较长的字符串可以断成多个字符串然后分行书写
8、可以在变量定义中使用tab使变量名对齐

9.2 注释

1、整个源文件的顶部注释，说明相关信息
2、函数注释，说明功能、参数、返回值、错误码等，写在函数定义上侧
3、相对独立的注释，特别说明，写在语句组的上侧

9.3 标识符

1、完整的单词和易于理解的缩写
count -- cnt
block -- blk
length -- len
window -- win
message -- msg
number -- nr
temporary -- temp -- tmp
internationalization -- i18n
trans -- x
transmit -- xmt
2、全小写加下划线命名
3、全局变量和全局函数命名要详细
4、不使用汉语拼音做标识符

9.4 函数

1、一个函数只为做好一件事情，不要设计成用途广泛、面面俱到的，这样肯定超长，而且不可重用，维护困难
2、函数内部的缩进层次不宜过多，小于4层，过多说明设计太复杂
3、函数不要太长，在24行的标准终端上不超过两屏
4、执行函数就是执行一个动作

9.5 indent工具

indent -kr -i8 main.c

-kr表示K&R风格、-i8表示缩进8个空格长度
indent命令会直接修改原文件
